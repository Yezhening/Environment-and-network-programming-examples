# 说明

## 代码

### 说明

- 对大部分总结的进程间通信机制提供简单实现
- 有详细步骤解析
- 只简单演示基础的操作，未考虑深层次的问题
- 对相关函数获取返回值进行错误处理，不相关函数不进行错误处理

### 目录结构

- 头文件全局变量：glov_h
- 源文件全局变量：glov_s
- 文件，PV操作：file_pv
- 管道：pipe
- 命名管道：fifo
- 信号：sig
- XSI信号量：sem_XSI
- POSIX信号量：sem_POSIX
- 消息队列：mq
- 共享内存：shm
- 套接字：socket（使用代码仓库中，“传输控制协议（TCP）简单版：TCP_simple”）
- 内存映射：mmap

## 内容

低级：3种

- 全局变量/glov：类似管道、命名管道、消息队列、共享内存：头文件/库文件全局变量，源文件全局变量
- 文件/file：类似管道、命名管道、消息队列、共享内存
- PV操作/pv：类似信号量

第三方：2种

- 数据库/db：类似管道、命名管道、消息队列、共享内存
- 缓存/cache：类似管道、命名管道、消息队列、共享内存

一般：7种

- 管道/无名管道/pipe
- 命名管道/有名管道/FIFO
- 信号/signal
- 信号量/semaphore：XSI信号量，POSIX信号量
- 消息队列/mq
- 共享内存/shm
- 套接字/socket

高级：1种

- 内存映射/mmap：类似共享内存

### 全局变量

#### 头文件全局变量

缺点：

- 只读，不可写
- 同步互斥问题：无法解决。需要引入其他进程间通信机制才能解决
- 扩展问题：无法解决。需要引入其他进程间通信机制才能解决

相关语句：

- extern
- #include
- ...

#### 源文件全局变量

缺点：

- 只读，不可写
- 只能用于具有公共祖先的进程间
- 同步互斥问题：无法解决。需要引入其他进程间通信机制才能解决
- 扩展问题：无法解决。需要引入其他进程间通信机制才能解决


### 文件
缺点：

- 性能问题：访问文件效率低
- 同步互斥问题：无法解决。需要引入其他进程间通信机制才能解决
- 扩展问题：无法解决。需要引入其他进程间通信机制才能解决

相关函数：

- open()
- ...
- fopen()
- ...


### PV操作

缺点：

- 同步互斥问题：无法解决。需要引入其他进程间通信机制才能解决
- 扩展问题：无法解决。需要引入其他进程间通信机制才能解决

### 数据库


优点：

- 相对于文件，由相关机制优化同步互斥、性能和扩展问题。


相关数据库：

- MySQL
- SQL Server
- ...


### 缓存

优点：

- 相对于文件，由相关机制优化同步互斥、性能和扩展问题。


相关缓存：

- Memcached
- Redis
- ...


### 管道
缺点：

- 半双工
- 只能用于具有公共祖先的进程间

相关函数：

- pipe()：创建管道
- popen()：打开管道
- pclose()：关闭管道


### 命名管道
相关函数：

- mkfifo()：创建命名管道
- mkfifoat()：创建命名管道


### 信号

相关函数：

- signal()
- kill()
- ...

### 信号量
#### XSI信号量

缺点：

- 在系统范围内起作用，没有引用计数。不能隐式删除，需要显式删除
- 在文件系统中没有名字。不能使用文件相关函数操作，需要使用特定的系统调用或命令
- 不使用文件描述符。不能使用多路复用函数操作，一般一次只使用一个而不是多个（消息队列）

相关函数：

- semget()：获取信号量
- semctl()：控制信号量
- semop()：操作信号量


#### POSIX信号量


相关函数：

- sem_open()：打开有名信号量
- sem_close()：关闭信号量
- sem_unlink()：销毁有名信号量
- sem_trywait()：尝试等待信号量
- sem_wait()：等待信号量
- sem_timewait()：定时等待信号量
- sem_post()：提交信号量
- sem_init()：初始化无名信号量
- sem_destroy()：销毁无名信号量
- sem_getvalue()：获取信号量值


### 消息队列/mq

缺点：

- 在系统范围内起作用，没有引用计数。不能隐式删除，需要显式删除
- 在文件系统中没有名字。不能使用文件相关函数操作，需要使用特定的系统调用或命令
- 不使用文件描述符。不能使用多路复用函数操作，一般一次只使用一个而不是多个（消息队列）

相关函数：

- ftok()：创建键
- msgget()：获取消息队列
- msgctl()：控制消息队列
- msgsnd()：发送消息到消息队列
- msgrcv()：接收消息从消息队列

### 共享内存/shm

缺点：

- 在系统范围内起作用，没有引用计数。不能隐式删除，需要显式删除
- 在文件系统中没有名字。不能使用文件相关函数操作，需要使用特定的系统调用或命令
- 不使用文件描述符。不能使用多路复用函数操作，一般一次只使用一个而不是多个（消息队列）


相关函数：

- shmget()：获取共享内存
- shmctl()：控制共享内存
- shmat()：连接共享内存
- shmdt()：分离共享内存

### 套接字/sock

优点：

- 可用于不同主机进程间的通信

相关函数：

- socket()
- bind()
- ...


### 内存映射
相关函数：

- mmap()
- munmap()
